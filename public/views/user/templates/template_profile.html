<div ng-include="model.templates.navHeader"></div>

<!-- Profile -->
<div class="container-fluid">
    <div class="alert-danger" ng-show="model.errorMsg">{{model.errorMsg}}</div>
    <div class="alert-success" ng-show="model.successMsg">{{model.successMsg}}</div>
    <form>
        <div class="form-group">
            <label for="username">Username</label>
            <input type="text"
                   class="form-control"
                   id="username"
                   placeholder="Username"
                   ng-model="model.profile.username">
        </div>
        <div class="form-group">
            <label for="email">Email address</label>
            <input type="email"
                   class="form-control"
                   id="email"
                   placeholder="alice@wonderland.com"
                   ng-model="model.profile.emailAddress">
        </div>
        <div class="form-group">
            <label for="first-name">First Name</label>
            <input type="text"
                   class="form-control"
                   id="first-name"
                   placeholder="Alice"
                   ng-model="model.profile.firstName">
        </div>
        <div class="form-group">
            <label for="last-name">Last Name</label>
            <input type="text"
                   class="form-control"
                   id="last-name"
                   placeholder="Wonderland"
                   ng-model="model.profile.lastName">
        </div>
    </form>

    <div>
        <label>Favorite Poems</label>
        <!-- TODO reuse template_search_result_list_group.html even for this and move it out of search dir -->
        <ul class="list-group">
            <li class="list-group-item" ng-repeat="favorite in model.favorites">
                <div><b>{{favorite.title}}</b></div>
                <div><i>{{favorite.author}}</i></div>
                <a href="#!/search/{{favorite.author}}/{{favorite.title}}">Go to Poem</a>
                <br/>
                <a class="alert-danger" ng-click="model.unFavoritePoem(favorite._id)">Remove from Favorites</a>
            </li>
        </ul>
    </div>

    <div>
        <label>Following</label>
        <!-- TODO need generic user list template to use here -->
        <ul class="list-group">
            <li class="list-group-item" ng-repeat="follower in model.followers">
                <div class="container-fluid aoa-padding-lr-none">
                    <a href="#!/profile/{{follower._id}}">{{follower.username}}</a>
                    <a class="btn btn-danger pull-right" ng-click="model.unFollowUser(follower._id)">Unfollow</a>
                </div>
            </li>
        </ul>
    </div>

    <div>
        <label>Penned Poems</label>
        <!-- TODO bring out into separate template perhaps again merging with template_search_result_list_group.html -->
        <ul class="list-group">
            <li class="list-group-item" ng-repeat="poem in model.poems">
                <div><b>{{poem.title || ""}}</b></div>
                <a href="#!/profile/{{poem.author._id}}">
                    <i>{{poem.author.username}}</i>
                </a>
                <div ng-repeat="line in poem.lines | limitTo: model.maxLines track by $index">{{line}}</div>
                <div ng-if="poem.lines.length > model.maxLines">...</div>
                <div>{{poem.lines.length}}</div>
                <a href="#!/poem/{{poem._id}}">Go to Poem</a>
                <br/>
            </li>
        </ul>
    </div>

    <div>
        <label>Penned Translations</label>
        <!-- TODO bring out into separate template perhaps again merging with template_search_result_list_group.html -->
        <ul class="list-group">
            <li class="list-group-item" ng-repeat="translation in model.translations">
                <div><b>{{translation.title || ""}}</b></div>
                <a href="#!/profile/{{translation.author._id}}">
                    <i>{{translation.author.username}}</i>
                </a>
                <div ng-repeat="line in translation.lines | limitTo: model.maxLines track by $index">{{line}}</div>
                <div ng-if="translation.lines.length > model.maxLines">...</div>
                <div>{{translation.lines.length}}</div>
                <a href="#!/poem/{{translation.originalPoem}}/translation/{{translation._id}}">Edit Translation</a>
                <br/>
            </li>
        </ul>
    </div>

    <label>Reviews</label>
    <ul class="list-group">
        <li class="list-group-item" ng-repeat="review in model.reviews">
            <b>{{review._poem.title}}</b>
            <br/>
            <a href="#!/profile/{{review._poem.author._id}}">
                <i>{{review._poem.author.username}}</i>
            </a>
            <br/>
            <i class="alert-danger" ng-if="!review.text">Review Not Complete</i>
            <span ng-if="review.text">{{review.text.substring(0, model.maxReviewLength)}}</span>
            <span ng-if="review.text && review.text.length > model.maxReviewLength">...</span>
            <br/>
            <a class="btn btn-info" ng-if="!review.text" href="#!/poem/{{review._poem._id}}/review/{{review._id}}">Write
                Review</a>
            <a class="btn btn-info" ng-if="review.text" href="#!/poem/{{review._poem._id}}/review/{{review._id}}">Edit
                Review</a>
        </li>
    </ul>

    <!-- TODO add to footer -->
    <a class="btn btn-success btn-block" href="#!/poem">Pen New Poem</a>
    <a class="btn btn-warning btn-block" href="#!/search">To Search Page</a>
</div>

<div ng-include="model.templates.navFooter"></div>